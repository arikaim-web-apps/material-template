{% set user = service('access').getUser() %}
{% set user = createModel('Users').findById(user.uuid) %}
{% set user_details = createModel('UserDetails','users').findByColumn(user.id,'user_id') %}   

<form class="form" id="user_details_form">   
    <div class="flex flex-row sm:flex-col md:flex-row items-center flex-grow">
        <div class="{{ theme.form.field }} required flex flex-col w-1/2 md:w-1/2 sm:w-full">
            <input 
                class="form-input 
                {{ theme.form.input.class|default(styles.input.class) }} 
                {{ theme.form.input.hover|default(styles.input.hover) }} 
                {{ theme.form.input.focus|default(styles.input.focus) }}"
                type="text" 
                rule="minLength[2]"
                name="user_name" 
                id="user_name" 
                placeholder=" "             
                value="{{ user.user_name }}"> 
            <label class="{{ theme.form.label|default(styles.label) }}">
                    {{ fields.user_name.label }}
            </label>
        </div>   
        <div class="ml-2 {{ theme.form.field }} required flex flex-col w-1/2 md:w-1/2 sm:w-full">           
            <input 
                class="form-input 
                {{ theme.form.input.class|default(styles.input.class) }} 
                {{ theme.form.input.hover|default(styles.input.hover) }} 
                {{ theme.form.input.focus|default(styles.input.focus) }}"
                type="text" 
                rule="email"
                name="email" 
                id="email" 
                placeholder=" "             
                value="{{ user.email }}">  
            <label class="{{ theme.form.label|default(styles.label) }}">
                {{ fields.email.label }}
            </label>
        </div> 
    </div>
    <div class="my-8">
        <hr class="border-t-2 border-solid border-gray-50">
    </div> 
    <div class="flex flex-row sm:flex-col md:flex-row items-center flex-grow my-1">
        <div class="{{ theme.form.field }} flex flex-col w-1/2 md:w-1/2 sm:w-full">            
            <input 
                class="form-input 
                {{ theme.form.input.class|default(styles.input.class) }} 
                {{ theme.form.input.hover|default(styles.input.hover) }} 
                {{ theme.form.input.focus|default(styles.input.focus) }}"
                rule="htmlTags" 
                name="first_name" 
                id="first_name" 
                optional="true" 
                placeholder=" " 
                type="text" 
                value="{{ user_details.first_name }}">
            <label class="{{ theme.form.label|default(styles.label) }}">
                {{ fields.first_name.label }}
            </label>
        </div>
        <div class="ml-2 {{ theme.form.field }} flex flex-col w-1/2 md:w-1/2 sm:w-full">           
            <input 
                class="form-input 
                {{ theme.form.input.class|default(styles.input.class) }} 
                {{ theme.form.input.hover|default(styles.input.hover) }} 
                {{ theme.form.input.focus|default(styles.input.focus) }}"
                rule="htmlTags" 
                name="last_name" 
                id="last_name" 
                optional="true" 
                placeholder=" " 
                type="text" 
                value="{{ user_details.last_name }}">
            <label class="{{ theme.form.label|default(styles.label) }}">
                {{ fields.last_name.label }}
            </label>   
        </div>
    </div>   
    <div class="flex flex-row sm:flex-col md:flex-row items-center flex-grow">
        <div class="{{ theme.form.field }} flex flex-col w-1/2 md:w-1/2 sm:w-full">           
            <input 
                class="form-input 
                {{ theme.form.input.class|default(styles.input.class) }} 
                {{ theme.form.input.hover|default(styles.input.hover) }} 
                {{ theme.form.input.focus|default(styles.input.focus) }}"
                error-prompt="{{ fields.phone.error }}" 
                rule="integer,minLength[2]" 
                optional="true" 
                name="phone" 
                id="phone" 
                placeholder=" " 
                type="number" 
                value="{{ user_details.phone }}">
            <label class="{{ theme.form.label|default(styles.label) }}">
                {{ fields.phone.label }}
            </label>
        </div>
        <div class="ml-2 {{ theme.form.field }} flex flex-col w-1/2 md:w-1/2 sm:w-full">           
            <input 
                class="form-input 
                {{ theme.form.input.class|default(styles.input.class) }} 
                {{ theme.form.input.hover|default(styles.input.hover) }} 
                {{ theme.form.input.focus|default(styles.input.focus) }}"
                error-prompt="{{ fields.phone.error }}" 
                rule="integer,minLength[2]" 
                optional="true" 
                name="phone_2" 
                id="phone_2" 
                placeholder=" " 
                type="number" 
                value="{{ user_details.phone_2 }}">
            <label class="{{ theme.form.label|default(styles.label) }}">
                {{ fields.phone2.label }}
            </label>
        </div>
    </div>
    {{  component('current>form.footer',{          
            button_title: labels.save               
        })                      
    }}          
</form>